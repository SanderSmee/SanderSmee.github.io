<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="My coworker points me to the presentation of Aslak Hellesøy, Sub-second acceptance tests. As we&amp;#8217;re struggling with long running and brittle acceptance tests, that provoking title triggers my interest, and I start watching the recording&amp;#8230;&amp;#8203;"><meta name="author" content="Sander Smeman"><meta property="og:title" content="Testable architecture"><meta property="og:description" content="My coworker points me to the presentation of Aslak Hellesøy, Sub-second acceptance tests. As we&amp;#8217;re struggling with long running and brittle acceptance tests, that provoking title triggers my interest, and I start watching the recording&amp;#8230;&amp;#8203;"><meta property="og:site_name" content="&lt;i class=&#34;fas fa-brain&#34;&gt;&lt;/i&gt;.toString();"><meta property="og:type" content="article"><meta property="og:image" content="http://thoughts.tostring.bloghttps://source.unsplash.com/dC6Pb2JdAqs"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@@osusso"><meta name="twitter:image" content="http://thoughts.tostring.bloghttps://source.unsplash.com/dC6Pb2JdAqs"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"><link rel="dns-prefetch" href="//use.fontawesome.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><title>Testable architecture - thoughts.toString();</title><script type="text/javascript">"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)},function(e){console.log("ServiceWorker registration failed: ",e)})})</script><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/vs2015.min.css" rel="stylesheet"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-8287349-4","auto"),ga("send","pageview")</script></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">thoughts.toString();</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="https://github.com/SanderSmee/sandersmee.github.io">Github</a></li></ul></div></div></nav><header class="intro-header" style="background-image:url(//source.unsplash.com/92dgYPsir9k)"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>Testable architecture</h1><span class="meta"><span class="meta__item">2019-02-06 </span><span class="meta__item">3 minutes read</span></span></div></div></div></div></header><article><div class="container"><div class="row"><div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags"><a href="/tags/hexagonal/">#hexagonal</a> <a href="/tags/test/">#test</a></div><div class="col-lg-4 col-md-5 post-categories"><a href="/category/Architecture/">Architecture</a></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="paragraph"><p>My coworker points me to the presentation of Aslak Hellesøy, <a href="https://www.youtube.com/watch?v=PE_1nh0DdbY" target="_blank" rel="noopener">Sub-second acceptance tests</a>. As we&#8217;re struggling with long running and brittle acceptance tests, that provoking title triggers my interest, and I start watching the recording&#8230;&#8203;</p></div><a id="more"></a><div class="paragraph"><p>The most interesting thing about the talk is not the speed of the tests, but of course how to accomplish faster tests. Less surprising might be that there isn&#8217;t a lightning fast (test) framework that can deliver the sub-second tests. And also that there&#8217;s no magical trick to get those tests so fast. Getting to fast acceptance tests has all to do with good software architecture practices.</p></div><div class="sect1"><h2>Composing software</h2><div class="sectionbody"><div class="paragraph"><p>Being able to exchange certain parts of your system can make that system easier to test. If the parts you can replace contain the bounds of the system, then those bounds can temporarily be put aside. The bounds we&#8217;re referring to are the IO-bounds of a system, for example a HTTP call to the system, or a connection the system has to a database.</p></div><div class="paragraph"><p>For parts of your system to be easy replaceable, they need well thought of interfaces or (API) contracts. This correspondents to the <em>Liskov substitution principle</em> one of the <a href="https://en.wikipedia.org/wiki/SOLID" target="_blank" rel="noopener">SOLID</a> principles. An IO-bound implementation of that contract could be replaced with a mock or stub without altering the correctness of that subpart of the system.</p></div></div></div><div class="sect1"><h2>Acceptance tests</h2><div class="sectionbody"><div class="paragraph"><p>Secondly is that acceptance test descriptions should be decoupled from how they interact with the system under test. When those test contain only functional or business language, it&#8217;s up to a framework like cucumber to connect those descriptions to the system to test. And that, combined with the API or interfaces of the business domain, let&#8217;s you choose what parts of the system you want during the execution of the tests.</p></div></div></div><div class="sect1"><h2>Testable architecture</h2><div class="sectionbody"><div class="paragraph"><p>Aslak recommends the talk <a href="https://www.youtube.com/watch?v=Fk4rCn4YLLU" target="_blank" rel="noopener">End to end functional tests that can run in milliseconds</a> by Nat Pryce. Nat mentions the software architecture that enables these abilities: <a href="https://web.archive.org/web/20180822100852/http://alistair.cockburn.us/Hexagonal+architecture" target="_blank" rel="noopener">hexagonal architecture</a>. He has written before about testing well architected software in <a href="http://www.natpryce.com/articles/000772.html" target="_blank" rel="noopener">Visualising Test Terminology</a>. These ideas are repeated by Aslak in his previous talk <a href="https://www.youtube.com/watch?v=uwH83PjR98g" target="_blank" rel="noopener">Testable Architectures</a>.</p></div></div></div><div class="sect1"><h2>Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>So, if you want you your tests to be easier to write and faster to execute, it&#8217;s important to have an architecture that supports that. Hexagonal architecture does that by separating technical and business concerns. When you also keep technical concerns out of your acceptance tests, you may connect those directly to the business interfaces of the system. Thereby avoiding the technical, and usually slowest, part of the system, to increase the speed of acceptance test execution.</p></div></div></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"></div></div></div></article><hr><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href="https://twitter.com/osusso" target="_blank"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://github.com/sandersmee/sandersmee.github.io" target="_blank"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href="https://www.linkedin.com/in/sandersmeman/" target="_blank"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href="mailto:sander.smeman@gmail.com" target="_blank"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href="/atom.xml" target="_blank"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">&copy; 2019 Sander Smeman<br></p><p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p></div></div></div></footer><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script></body></html>